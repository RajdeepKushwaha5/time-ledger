export const DEVICE_DIMENSIONS = {
    // iPhone 16 Series
    'iphone-16-pro-max': { name: 'iPhone 16 Pro Max', width: 1320, height: 2868 },
    'iphone-16-pro': { name: 'iPhone 16 Pro', width: 1206, height: 2622 },
    'iphone-16-plus': { name: 'iPhone 16 Plus', width: 1290, height: 2796 },
    'iphone-16': { name: 'iPhone 16', width: 1179, height: 2556 },
    // iPhone 15 Series
    'iphone-15-pro-max': { name: 'iPhone 15 Pro Max', width: 1290, height: 2796 },
    'iphone-15-pro': { name: 'iPhone 15 Pro', width: 1179, height: 2556 },
    'iphone-15-plus': { name: 'iPhone 15 Plus', width: 1290, height: 2796 },
    'iphone-15': { name: 'iPhone 15', width: 1179, height: 2556 },
    // iPhone 14 Series
    'iphone-14-pro-max': { name: 'iPhone 14 Pro Max', width: 1290, height: 2796 },
    'iphone-14-pro': { name: 'iPhone 14 Pro', width: 1179, height: 2556 },
    'iphone-14-plus': { name: 'iPhone 14 Plus', width: 1284, height: 2778 },
    'iphone-14': { name: 'iPhone 14', width: 1170, height: 2532 },
    // iPhone 13 Series
    'iphone-13-pro-max': { name: 'iPhone 13 Pro Max', width: 1284, height: 2778 },
    'iphone-13-pro': { name: 'iPhone 13 Pro', width: 1170, height: 2532 },
    'iphone-13': { name: 'iPhone 13', width: 1170, height: 2532 },
    'iphone-13-mini': { name: 'iPhone 13 Mini', width: 1080, height: 2340 },
    // iPhone 12 Series
    'iphone-12-pro-max': { name: 'iPhone 12 Pro Max', width: 1284, height: 2778 },
    'iphone-12-pro': { name: 'iPhone 12 Pro', width: 1170, height: 2532 },
    'iphone-12': { name: 'iPhone 12', width: 1170, height: 2532 },
    'iphone-12-mini': { name: 'iPhone 12 Mini', width: 1080, height: 2340 },
    // iPhone 11 Series
    'iphone-11-pro-max': { name: 'iPhone 11 Pro Max', width: 1242, height: 2688 },
    'iphone-11-pro': { name: 'iPhone 11 Pro', width: 1125, height: 2436 },
    'iphone-11': { name: 'iPhone 11', width: 828, height: 1792 },
    // iPhone SE & Others
    'iphone-se-3': { name: 'iPhone SE (3rd Gen)', width: 750, height: 1334 },
    'iphone-se-2': { name: 'iPhone SE (2nd Gen)', width: 750, height: 1334 },
    'iphone-se': { name: 'iPhone SE', width: 750, height: 1334 },
    'iphone-xr': { name: 'iPhone XR', width: 828, height: 1792 },
    'iphone-xs-max': { name: 'iPhone XS Max', width: 1242, height: 2688 },
    'iphone-xs': { name: 'iPhone XS', width: 1125, height: 2436 },
    'iphone-x': { name: 'iPhone X', width: 1125, height: 2436 },
    // Samsung Galaxy S Series
    'samsung-s24-ultra': { name: 'Samsung Galaxy S24 Ultra', width: 1440, height: 3120 },
    'samsung-s24-plus': { name: 'Samsung Galaxy S24+', width: 1440, height: 3120 },
    'samsung-s24': { name: 'Samsung Galaxy S24', width: 1080, height: 2340 },
    'samsung-s23-ultra': { name: 'Samsung Galaxy S23 Ultra', width: 1440, height: 3088 },
    'samsung-s23-plus': { name: 'Samsung Galaxy S23+', width: 1080, height: 2340 },
    'samsung-s23': { name: 'Samsung Galaxy S23', width: 1080, height: 2340 },
    'samsung-s22-ultra': { name: 'Samsung Galaxy S22 Ultra', width: 1440, height: 3088 },
    'samsung-s22': { name: 'Samsung Galaxy S22', width: 1080, height: 2340 },
    'samsung-s21-ultra': { name: 'Samsung Galaxy S21 Ultra', width: 1440, height: 3200 },
    'samsung-s21': { name: 'Samsung Galaxy S21', width: 1080, height: 2400 },
    // Samsung Galaxy A Series
    'samsung-a54': { name: 'Samsung Galaxy A54', width: 1080, height: 2340 },
    'samsung-a34': { name: 'Samsung Galaxy A34', width: 1080, height: 2340 },
    // Google Pixel
    'pixel-9-pro-xl': { name: 'Google Pixel 9 Pro XL', width: 1344, height: 2992 },
    'pixel-9-pro': { name: 'Google Pixel 9 Pro', width: 1280, height: 2856 },
    'pixel-9': { name: 'Google Pixel 9', width: 1080, height: 2424 },
    'pixel-8-pro': { name: 'Google Pixel 8 Pro', width: 1344, height: 2992 },
    'pixel-8': { name: 'Google Pixel 8', width: 1080, height: 2400 },
    'pixel-7-pro': { name: 'Google Pixel 7 Pro', width: 1440, height: 3120 },
    'pixel-7': { name: 'Google Pixel 7', width: 1080, height: 2400 },
    'pixel-7a': { name: 'Google Pixel 7a', width: 1080, height: 2400 },
    'pixel-6-pro': { name: 'Google Pixel 6 Pro', width: 1440, height: 3120 },
    'pixel-6': { name: 'Google Pixel 6', width: 1080, height: 2400 },
    // OnePlus
    'oneplus-12': { name: 'OnePlus 12', width: 1440, height: 3168 },
    'oneplus-11': { name: 'OnePlus 11', width: 1440, height: 3216 },
    'oneplus-10-pro': { name: 'OnePlus 10 Pro', width: 1440, height: 3216 },
    // Xiaomi
    'xiaomi-14-ultra': { name: 'Xiaomi 14 Ultra', width: 1440, height: 3200 },
    'xiaomi-14': { name: 'Xiaomi 14', width: 1200, height: 2670 },
    'xiaomi-13': { name: 'Xiaomi 13', width: 1080, height: 2400 },
    // Other Android
    'sony-xperia-1-v': { name: 'Sony Xperia 1 V', width: 1644, height: 3840 },
    'nothing-phone-2': { name: 'Nothing Phone (2)', width: 1080, height: 2412 },
    'generic-1080p': { name: 'Generic 1080 x 2400', width: 1080, height: 2400 },
    'generic-1440p': { name: 'Generic 1440 x 3200', width: 1440, height: 3200 },
    'generic-android': { name: 'Generic Android', width: 1080, height: 2400 },
    // Legacy keys for backwards compatibility
    iphone16promax: { name: 'iPhone 16 Pro Max', width: 1320, height: 2868 },
    iphone16pro: { name: 'iPhone 16 Pro', width: 1206, height: 2622 },
    iphone16plus: { name: 'iPhone 16 Plus', width: 1290, height: 2796 },
    iphone16: { name: 'iPhone 16', width: 1179, height: 2556 },
    iphone15promax: { name: 'iPhone 15 Pro Max', width: 1290, height: 2796 },
    iphone15pro: { name: 'iPhone 15 Pro', width: 1179, height: 2556 },
    iphone15: { name: 'iPhone 15', width: 1179, height: 2556 },
    iphone14promax: { name: 'iPhone 14 Pro Max', width: 1290, height: 2796 },
    iphone14: { name: 'iPhone 14', width: 1170, height: 2532 },
    s24ultra: { name: 'Samsung S24 Ultra', width: 1440, height: 3120 },
    s24: { name: 'Samsung S24', width: 1080, height: 2340 },
    pixel9pro: { name: 'Google Pixel 9 Pro', width: 1280, height: 2856 },
    generic_16_9: { name: 'Generic 16:9', width: 1440, height: 2560 },
};

export const COLOR_PRESETS = {
    orange: { lived: '#FFFFFF', remaining: '#1C1C1E', current: '#FF5D00' },
    blue: { lived: '#FFFFFF', remaining: '#1C1C1E', current: '#0066FF' },
    emerald: { lived: '#FFFFFF', remaining: '#1C1C1E', current: '#10B981' },
    green: { lived: '#FFFFFF', remaining: '#1C1C1E', current: '#10B981' },
    rose: { lived: '#FFFFFF', remaining: '#1C1C1E', current: '#F43F5E' },
    cyan: { lived: '#FFFFFF', remaining: '#1C1C1E', current: '#06B6D4' },
    purple: { lived: '#FFFFFF', remaining: '#1C1C1E', current: '#8B5CF6' },
};

/**
 * Helper to parse config from search params
 */
export function parseConfigFromURL(params) {
    return {
        type: params.get('type') || 'life',
        // Support both 'device' (new) and 'model' (legacy) parameters
        device: params.get('device') || params.get('model') || 'iphone-15-pro-max',
        model: params.get('model') || params.get('device') || 'iphone-15-pro-max',
        birth: params.get('birth') || '1990-01-01',
        lifespan: parseInt(params.get('lifespan') || '80'),
        goalName: params.get('goalName') || '',
        goalStart: params.get('goalStart') || new Date().toISOString().split('T')[0],
        goalEnd: params.get('goalEnd') || new Date(Date.now() + 90 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
        color: params.get('color') || 'orange',
        layout: params.get('layout') || 'circles'
    };
}

/**
 * Calculate weeks lived since birth
 */
export function calculateWeeksLived(birthDate) {
    const birth = new Date(birthDate);
    const now = new Date();
    const diffTime = Math.abs(now - birth);
    return Math.floor(diffTime / (1000 * 60 * 60 * 24 * 7));
}

/**
 * Calculate days elapsed in current year
 */
export function calculateDaysInYear(year) {
    const start = new Date(year, 0, 0);
    const now = new Date();
    const diff = now - start;
    const oneDay = 1000 * 60 * 60 * 24;
    return Math.floor(diff / oneDay);
}

/**
 * Get total days in a year
 */
export function getDaysInYear(year) {
    return ((year % 4 === 0 && year % 100 !== 0) || year % 400 === 0) ? 366 : 365;
}

/**
 * Calculate progress between two dates
 */
export function calculateProgress(startDate, endDate) {
    const start = new Date(startDate);
    const end = new Date(endDate);
    const now = new Date();

    const total = Math.ceil((end - start) / (1000 * 60 * 60 * 24));
    let elapsed = Math.ceil((now - start) / (1000 * 60 * 60 * 24));

    // Clamp elapsed to valid range
    elapsed = Math.max(0, Math.min(elapsed, total));

    const percent = total > 0 ? Math.round((elapsed / total) * 100) : 0;

    return { totalDays: total, daysElapsed: elapsed, percentComplete: percent };
}

export function cn(...inputs) {
    return inputs.filter(Boolean).join(' ');
}

/**
 * Format a date for display
 */
export function formatDate(dateStr, options = {}) {
    const defaultOptions = { month: 'short', day: 'numeric', year: 'numeric' };
    return new Date(dateStr).toLocaleDateString('en-US', { ...defaultOptions, ...options });
}
